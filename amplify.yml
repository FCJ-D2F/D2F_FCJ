version: 1
frontend:
  phases:
    preBuild:
      commands:
        - corepack enable
        - corepack prepare pnpm@latest --activate
        - ls -R .
        - cd Frontend
        - pnpm install
    build:
      commands:
        - pnpm run build
  artifacts:
    baseDirectory: Frontend/dist
    files:
      - '**/*'
  cache:
    paths:
      - Frontend/node_modules/**/*
customHeaders:
  - pattern: '/api/**'
    headers:
      - key: 'Access-Control-Allow-Origin'
        value: '*'
      - key: 'Access-Control-Allow-Headers'
        value: 'Content-Type,Authorization'
      - key: 'Access-Control-Allow-Methods'
        value: 'GET,POST,PUT,DELETE,OPTIONS'
rewrites:
  - source: '/api/<*>'
    target: 'https://7wgy47gj08.execute-api.ap-southeast-1.amazonaws.com/dev'
    status: '200'
    type: 'PROXY'
